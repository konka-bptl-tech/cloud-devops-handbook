Here’s a detailed, interview-ready explanation for your **Terraform Modules** section:

---

## **14. Modules**

Modules in Terraform are **reusable, self-contained packages of Terraform configuration**. They allow you to **organize infrastructure code**, **avoid repetition**, and **share code across projects**.

---

### **1. What Are Modules**

* **Root module:** The directory where you run `terraform apply`.
* **Child module:** A module called from the root or another module.
* **Purpose:** Promote **reusability, consistency, and DRY (Don’t Repeat Yourself)** practices.

---

### **2. Creating Reusable Modules**

* **Folder structure:**

```
modules/
 └─ s3_bucket/
     ├─ main.tf
     ├─ variables.tf
     └─ outputs.tf
```

* **main.tf (module)**

```hcl
resource "aws_s3_bucket" "this" {
  bucket = var.bucket_name
  acl    = var.acl
}
```

* **variables.tf (module)**

```hcl
variable "bucket_name" {
  type = string
}
variable "acl" {
  type    = string
  default = "private"
}
```

* **outputs.tf (module)**

```hcl
output "bucket_id" {
  value = aws_s3_bucket.this.id
}
```

---

### **3. Calling Modules**

* **Root module example:**

```hcl
module "dev_bucket" {
  source      = "./modules/s3_bucket"
  bucket_name = "my-dev-bucket"
  acl         = "private"
}

module "prod_bucket" {
  source      = "./modules/s3_bucket"
  bucket_name = "my-prod-bucket"
}
```

* **Key:** `source` can be a **local path**, **Git repo**, or **Terraform Registry**.

---

### **4. Input/Output Variables in Modules**

* **Input variables:** Allow passing values from root module to child module (`bucket_name`, `acl`).
* **Output variables:** Expose values from child module to root module (`bucket_id`).
* **Example usage:**

```hcl
output "prod_bucket_id" {
  value = module.prod_bucket.bucket_id
}
```

---

### **5. Module Versioning & Registry**

* **Terraform Registry:** Public or private modules can be versioned and shared.
* **Example:**

```hcl
module "vpc" {
  source  = "terraform-aws-modules/vpc/aws"
  version = "4.0.0"

  name = "my-vpc"
  cidr = "10.0.0.0/16"
}
```

* **Benefits:**

  * Consistency across projects
  * Easy to upgrade modules by changing `version`
  * Reuse tested, community-supported modules

---

### **6. Key Points for Interviews**

* Modules = **reusable building blocks**
* Organize infra into **root + child modules**
* Always use **input/output variables** to make modules flexible
* Versioning ensures **stability and maintainability**
* Encourage **DRY principle** in Terraform projects

---