# S3 Access Control Notes

## 1. ACLs (Access Control Lists)

* **Old way** of managing access in S3 (before bucket policies & IAM).
* Control access **at object level or bucket level**.
* Grant permissions to:

  * **AWS accounts**
  * **Groups** (e.g., `AllUsers` → public, `AuthenticatedUsers`).
* Permissions: Read, Write, Read ACP, Write ACP, Full Control.
* **Now AWS recommends not using ACLs** (use bucket policies/IAM instead).
* Good for **fine-grained object-level access** in rare cases.

---

## 2. Block Public Access (Bucket Settings)

* Safety feature to prevent accidental public exposure.
* **Recommended to always keep ON**, unless hosting public websites.
* Four options (can enable individually):

1. **Block public access to buckets/objects via new ACLs**

   * Prevents new ACLs that grant public access.
   * Existing ACLs remain unchanged.

2. **Block public access to buckets/objects via any ACLs**

   * Ignores all ACLs that grant public access (ACLs can’t make bucket public).

3. **Block public access to buckets/objects via new public bucket/access point policies**

   * Prevents creation of new bucket policies that allow public access.
   * Existing policies remain unchanged.

4. **Block public and cross-account access via any bucket/access point policies**

   * Ignores public & cross-account access in bucket policies.

✅ **Best practice** → Turn ON "Block all public access".

---

## 3. Bucket Policies

* **JSON-based policies** attached to S3 bucket (like IAM policy).
* Define **who can access bucket/objects** and what actions they can perform.
* More flexible & modern than ACLs.
* Example: Public read bucket policy:

```json
{
  "Version": "2012-10-17",
  "Statement": [
    {
      "Effect": "Allow",
      "Principal": "*",
      "Action": "s3:GetObject",
      "Resource": "arn:aws:s3:::my-bucket/*"
    }
  ]
}
```

* Use cases:

  * Allow only specific IAM roles or accounts.
  * Make bucket public (not recommended).
  * Enforce encryption on objects.
  * Allow access from CloudFront or VPC endpoint only.

---

✅ In short:

* **ACLs** → Legacy, object-level permissions.
* **Block Public Access** → Global safety switch to avoid public exposure.
* **Bucket Policies** → Modern, flexible JSON-based access control.

---