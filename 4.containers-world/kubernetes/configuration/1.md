### ✅ **What is a ConfigMap in Kubernetes?**

A **ConfigMap** is a Kubernetes object that stores **non-confidential configuration data** in **key-value pairs**. It allows you to **separate configuration from application code**, making your applications more flexible and portable.

---

### ✅ **Why Use ConfigMap?**

* Avoids **hardcoding configuration inside container images**.
* Makes applications **easier to manage** and **environment-agnostic**.
* **For small config changes, you don’t need to rebuild and redeploy the application image** – just update the ConfigMap and restart the pod (or let rolling update handle it).
* Supports multiple ways of injecting config into Pods (env variables or mounted files).

---

### ✅ **Key Points**

* Stores **plain text only** (not secrets).
* Can be consumed by **Pods, Deployments, StatefulSets**.
* Common for **environment variables**, **command-line args**, **config files**.

---

### ✅ **How to Create a ConfigMap**

#### **1. Using `kubectl` command**

```bash
kubectl create configmap app-config \
  --from-literal=APP_ENV=dev \
  --from-literal=APP_VERSION=1.0
```

---

#### **2. Using a YAML Manifest**

```yaml
apiVersion: v1
kind: ConfigMap
metadata:
  name: app-config
data:
  APP_ENV: "dev"
  APP_VERSION: "1.0"
```

Apply it:

```bash
kubectl apply -f configmap.yaml
```

---

### ✅ **How to Use ConfigMap in a Pod**

#### **Example: As Environment Variables**

```yaml
apiVersion: v1
kind: Pod
metadata:
  name: configmap-pod
spec:
  containers:
  - name: demo-container
    image: nginx
    envFrom:
    - configMapRef:
        name: app-config
```

Inside the container:

```
echo $APP_ENV      # dev
echo $APP_VERSION  # 1.0
```

---

#### **Example: As a Volume**

```yaml
apiVersion: v1
kind: Pod
metadata:
  name: configmap-volume-pod
spec:
  containers:
  - name: demo-container
    image: nginx
    volumeMounts:
    - name: config-volume
      mountPath: /etc/config
  volumes:
  - name: config-volume
    configMap:
      name: app-config
```

Now the ConfigMap keys become **files** inside `/etc/config`.

---

✅ **Best Practices**

* Use **ConfigMap for non-sensitive data**, **Secrets for sensitive data**.
* Keep ConfigMaps versioned in Git for **GitOps** workflows.
* For **dynamic config updates**, use a rolling restart or tools like **Reloader** to watch for changes.

---

### Best Practices Using `envFrom` vs individual keys in Kubernetes

**1. `envFrom` (whole ConfigMap or Secret)**

```yaml
envFrom:
  - configMapRef:
      name: crud-config
```

* All keys in the ConfigMap become environment variables.
* Good for **non-sensitive data**.
* Quick and easy for many config values.
* Not recommended for secrets — exposes all keys.

**2. Individual key references**

```yaml
env:
  - name: DB_USER
    valueFrom:
      secretKeyRef:
        name: crud-secrets
        key: MYSQL_USER
```

* Only injects the keys you need.
* Safer for **secrets**.
* More explicit, but verbose if many keys.

**✅ Best Practice**

* Use `envFrom` for ConfigMaps (non-sensitive).
* Use individual keys for Secrets (sensitive).

---
