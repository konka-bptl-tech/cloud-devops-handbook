## ðŸ”¹ What is Kustomization?

* **Kustomize** is a Kubernetes-native way to **customize raw YAML manifests** without using templates.
* It works by **overlaying patches** on top of your base YAMLs.
* You donâ€™t need a separate tool (since `kubectl` already supports it: `kubectl apply -k ./`).

---

## ðŸ”¹ Why do we use Kustomize?

1. **No templates, pure YAML** â†’ You donâ€™t learn a new language like Helm templating.
2. **Overlays for environments** â†’ Example: one base config, overlays for `dev`, `staging`, `prod`.
3. **Reusable manifests** â†’ Instead of duplicating YAMLs, you patch only what changes.
4. **GitOps friendly** â†’ Easy integration with tools like ArgoCD or Flux.

---

## ðŸ”¹ Comparison: Normal YAML vs Helm vs Kustomization

| Feature                   | **Normal YAML**       | **Helm**                                          | **Kustomize**                       |
| ------------------------- | --------------------- | ------------------------------------------------- | ----------------------------------- |
| **Approach**              | Write static YAML     | Template-based (Go templates + values)            | Patch-based (overlay YAMLs)         |
| **Reusability**           | Poor (copy-paste)     | High (values + templates)                         | Medium (base + overlays)            |
| **Complexity**            | Simple but repetitive | Higher (templating, charts)                       | Medium (pure YAML + patches)        |
| **Customization**         | Manual edits          | Values.yaml + CLI overrides                       | Kustomization.yaml overlays         |
| **Ecosystem**             | None                  | Huge (pre-built charts: NGINX, Prometheus, Istio) | Smaller, but used in GitOps         |
| **Rollback / Versioning** | No                    | Yes (Helm history)                                | No (depends on Git history)         |
| **Learning Curve**        | Very low              | Medium (templating)                               | Low (pure YAML, but layering logic) |

ðŸ‘‰ **When to use**:

* **Normal YAML** â†’ For very simple apps.
* **Helm** â†’ When you need packaging, templating, reusability, rollbacks.
* **Kustomize** â†’ When you want **YAML-only customization** with overlays (good for GitOps).

---

## ðŸ”¹ Folder Structure of Kustomization

### Example: `nginx` app with `dev` and `prod`

```
kustomize-example/
â”‚
â”œâ”€â”€ base/
â”‚   â”œâ”€â”€ deployment.yaml
â”‚   â”œâ”€â”€ service.yaml
â”‚   â””â”€â”€ kustomization.yaml
â”‚
â””â”€â”€ overlays/
    â”œâ”€â”€ dev/
    â”‚   â”œâ”€â”€ kustomization.yaml
    â”‚   â””â”€â”€ patch.yaml
    â”‚
    â””â”€â”€ prod/
        â”œâ”€â”€ kustomization.yaml
        â””â”€â”€ patch.yaml
```

### `base/kustomization.yaml`

```yaml
resources:
  - deployment.yaml
  - service.yaml
```

### `overlays/dev/kustomization.yaml`

```yaml
resources:
  - ../../base
patchesStrategicMerge:
  - patch.yaml
```

### `overlays/dev/patch.yaml`

```yaml
apiVersion: apps/v1
kind: Deployment
metadata:
  name: nginx
spec:
  replicas: 2
```

ðŸ‘‰ Now, apply for dev:

```bash
kubectl apply -k overlays/dev/
```

---

âœ… **Summary**

* **Normal YAML** â†’ static, copy-paste.
* **Helm** â†’ dynamic, reusable, package manager.
* **Kustomize** â†’ YAML overlays, simple customization, good for GitOps.

---