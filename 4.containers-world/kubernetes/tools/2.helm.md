### What is Helm?

* **Helm** is a **package manager for Kubernetes** (just like `apt` for Ubuntu or `yum` for CentOS).
* Instead of writing and applying multiple YAML manifests (Deployment, Service, ConfigMap, Ingress, etc.), Helm lets you **bundle them into a single package called a *Chart***.
* A **Chart** is basically a collection of YAML templates + values that can be reused and customized.

---

### Why Helm?

Hereâ€™s why Helm is widely used in Kubernetes:

1. **Simplifies Deployment**

   * Instead of applying 10â€“20 YAML files, you just run:

     ```bash
     helm install myapp ./chart
     ```
   * Helm takes care of creating everything.

2. **Reusability with Templates**

   * In normal Kubernetes YAML, you often repeat values (image name, namespace, labels).
   * With Helm, you put these in `values.yaml` and reuse them across templates.
   * If you need to update the image version:

     ```bash
     helm upgrade myapp ./chart --set image.tag=v2
     ```

3. **Versioning & Rollbacks**

   * Helm keeps a history of all releases.
   * If something goes wrong after an upgrade:

     ```bash
     helm rollback myapp 1
     ```

4. **Parameterization**

   * You can customize deployments for **dev, test, prod** just by changing `values.yaml`.
   * No need to copy-paste YAML for each environment.

5. **Ecosystem of Pre-built Charts**

   * Popular apps (Prometheus, Grafana, NGINX, Elasticsearch, Istio, etc.) already have ready-made Helm charts.
   * You can install them in minutes.

---

ðŸ‘‰ **In short:**
Helm = Kubernetes + Package Manager + Templates + Version Control.
It makes deployments **faster, reusable, and manageable** compared to raw YAMLs.

---

# ðŸ§¾ Helm Cheat Sheet

### ðŸ”¹ Repo Management

```bash
helm repo add <repo_name> <repo_url>    # Add a Helm repo
helm repo list                          # List repos
helm repo update                        # Update repo info
helm search repo <chart_name>           # Search chart in repos
```

### ðŸ”¹ Install / Uninstall

```bash
helm install <release_name> <chart>             # Install chart
helm install <release_name> <chart> -f values.yaml   # Install with custom values
helm uninstall <release_name>                   # Delete a release
```

### ðŸ”¹ Upgrade / Rollback

```bash
helm upgrade <release_name> <chart>             # Upgrade release
helm upgrade <release_name> <chart> --set key=value   # Override values
helm rollback <release_name> <revision_number>  # Rollback to previous version
```

### ðŸ”¹ Inspect / Status

```bash
helm list                               # List all releases
helm status <release_name>              # Status of release
helm get all <release_name>             # Show all manifest, notes, values
helm history <release_name>             # Release history
```

### ðŸ”¹ Template & Debug

```bash
helm template <release_name> <chart>           # Render templates locally
helm lint <chart_dir>                          # Check chart for issues
helm get manifest <release_name>               # Get rendered manifests
```

### ðŸ”¹ Create / Package / Push

```bash
helm create <chart_name>                # Create new chart skeleton
helm package <chart_dir>                # Package chart into .tgz
helm pull <repo/chart> --untar          # Download chart from repo
helm push <chart.tgz> <repo>            # Push packaged chart (if repo supports)
```

### ðŸ”¹ Values (Overrides)

```bash
helm show values <chart>                # Show default values
helm install <rel> <chart> --set key=value     # Override single value
helm install <rel> <chart> -f myvalues.yaml    # Override with values file
```

---

ðŸ‘‰ Quick Example:

```bash
# Add repo
helm repo add bitnami https://charts.bitnami.com/bitnami

# Install NGINX
helm install my-nginx bitnami/nginx

# Upgrade version
helm upgrade my-nginx bitnami/nginx --set image.tag=1.25.0

# Rollback
helm rollback my-nginx 1
```

# ðŸ§© Helm Template Functions (Most Used)

### ðŸ”¹ Variables & Values

```yaml
{{ .Values.image.repository }}   # Access value from values.yaml
{{ .Release.Name }}              # Helm release name
{{ .Chart.Name }}                # Chart name
{{ .Chart.Version }}             # Chart version
{{ .Release.Namespace }}         # Namespace where release is installed
```

---

### ðŸ”¹ Default Values

```yaml
# Use default if value not provided
image: {{ .Values.image.repository | default "nginx" }}
```

---

### ðŸ”¹ String Functions

```yaml
{{ upper "nginx" }}     # Output: NGINX
{{ lower "MyApp" }}     # Output: myapp
{{ title "my app" }}    # Output: My App
{{ quote "nginx" }}     # Output: "nginx"
{{ replace "-" "_" "my-app" }}  # Output: my_app
```

---

### ðŸ”¹ Numbers

```yaml
{{ add 1 2 }}          # 3
{{ sub 5 2 }}          # 3
{{ mul 2 3 }}          # 6
{{ div 10 2 }}         # 5
```

---

### ðŸ”¹ Flow Control

```yaml
# If-Else
{{- if .Values.service.enabled }}
type: ClusterIP
{{- else }}
type: NodePort
{{- end }}

# With (scoping)
{{- with .Values.resources }}
limits:
  cpu: {{ .cpu }}
  memory: {{ .memory }}
{{- end }}

# Range (loop)
{{- range .Values.env }}
- name: {{ .name }}
  value: {{ .value }}
{{- end }}
```

---

### ðŸ”¹ Include & Define (Reusable templates)

```yaml
# templates/_helpers.tpl
{{- define "myapp.fullname" -}}
{{ .Release.Name }}-{{ .Chart.Name }}
{{- end }}

# Use it
metadata:
  name: {{ include "myapp.fullname" . }}
```

---

### ðŸ”¹ Indentation & Nindent

```yaml
# Indent = spaces (no newline)
{{ .Values.config | indent 4 }}

# Nindent = newline + indent
config: |
{{ .Values.config | nindent 2 }}
```

---

### ðŸ”¹ ToYaml (convert map â†’ yaml)

```yaml
env:
{{ toYaml .Values.env | nindent 2 }}
```

---

### ðŸ”¹ Required (force user to provide value)

```yaml
image: {{ required "image.repository is required" .Values.image.repository }}
```

---

âœ… **Most Commonly Used in Real Charts**:

* `.Values`, `.Release`, `.Chart`
* `default`, `quote`, `upper/lower`
* `if`, `range`, `with`
* `include`, `define` (for helpers)
* `toYaml`, `nindent`

---